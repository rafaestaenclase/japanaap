<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
<title>Práctica</title>
<link rel="stylesheet" href="css/styles.css" />
<style>
  /* Botón japonés grande */
  #startWritingBtn {
    position: fixed;
    bottom: 15%;
    left: 0;
    width: 90%;
    padding: 18px;
    font-size: 1.5rem;
    text-align: center;
    background-color: #f5f5f5;
    border: none;
    border-top: 2px solid #ddd;
    font-family: "Noto Sans JP", sans-serif;
    color: #333;
    border-radius: 20px;
    cursor: pointer;
    margin-left: 50%;
    transform: translateX(-50%);
  }

  #startWritingBtn:active {
    background-color: #e0e0e0;
  }

  #pageTitle {
    margin: 0;
    padding: 8px 12px;
  }

  #pageTitle .subsection {
    font-weight: normal;
    font-size: 0.7em;
    color: #555;
  }

</style>
</head>
<body>
  <header>
    <h1 id="pageTitle">Práctica</h1>
    <button id="exitBtn">Salir</button>
  </header>

  <div class="question" id="question"></div>
  <input id="answer" placeholder="Escribe en japonés" autocomplete="off" />
  <div id="feedback"></div>
  <div class="correct-circle" id="correctCircle">〇</div>
  <div id="progressPills"></div>
  <button id="showAnswerBtn">Ver respuesta</button>

  <!-- Botón japonés fijo abajo -->
  <button id="startWritingBtn">✍ Comenzar</button>

  <script>
    document.getElementById("exitBtn").addEventListener("click", () => {
      window.location.href = "index.html";
    });

    // Focus en input al pulsar el botón japonés
    document.getElementById("startWritingBtn").addEventListener("click", () => {
      document.getElementById("answer").focus();
    });

    // Test localStorage
    localStorage.setItem('mensaje', 'hola mundo');
    const valor = localStorage.getItem('mensaje');
    console.log(valor); // muestra: hola mundo
  </script>

  <script src="js/hiraganaList.js"></script>
  <script src="js/katakanaList.js"></script>
  <script src="js/vocabularioSaludoList.js"></script>
  <script src="js/vocabularioComidaList.js"></script>

  <script>
    const params = new URLSearchParams(window.location.search);
    const play = params.get("play");
    const playingLevel = params.get("level");

    if (play === "hiraganaList") {
      quizList = hiraganaList || [];
    } else if (play === "katakanaList") {
      quizList = katakanaList || [];
    } else if (play === "vocabularioSaludoList") {
      quizList = vocabularioSaludoList || [];
    } else if (play === "vocabularioComidaList") {
      quizList = vocabularioComidaList || [];
    } else {
      console.error("No se ha especificado un tipo de juego válido");
    }

    if (playingLevel != undefined) {
    } else {
      console.error("No se ha especificado un nivel de juego válido");
    }

    filteredQuizList = quizList["levels"][playingLevel]["items"];

    // Barajar la lista filtrada
    function shuffle(array) {
      for (let i = array.length -1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }
    shuffle(filteredQuizList);

    const section = quizList["category"];                 // Ej: "Hiragana"
    const subSection = quizList["levels"][playingLevel]["name"]; // Ej: "Vocales"

    document.getElementById("pageTitle").innerHTML = `
      ${section} <span class="subsection">[${subSection}]</span>
    `;


  </script>
  <script src="js/quizLogic.js"></script>
</body>
</html>
